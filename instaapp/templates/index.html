{%extends 'base.html'%}
{%load crispy_forms_tags%}


{% block content %}
{{block.super}}

<h1>Welcome to InstaClone</h1>
<h2>Upload pics below! </h2>


<div class="container">
    <div class="row">
    {% for image in images %}
    <div class="col-md-4 mt-4">
        <p>{{image.user.user.username|title}}</p>

      <div class="card zoom">
            <a href="{% url 'image' image.id %}"><img src="{{image.gallery_image.url}}" style="width:100%;height:56%;" class="img-responsive" alt="Image"></a>
            <p>Caption: {{image.image_caption}}</p>
            <p>Posted on: {{image.pub_date}}</p> <br><br>

            

            <form action="{% url 'index' %}" method="POST">
                <input type="hidden" name="image.id" value="{{image.id}}">
                {% csrf_token %}
                {%if user not in image.liked.all%}
                <button class="btn btn-success" type="submit">Like</button>
                {% else %}
            
                <button class="btn btn-success" type="submit">Unlike</button>
            
                {% endif %}
            </form>
            <strong>{{image.liked.all.count}}Likes</strong><br><br><hr>




            
      </div>
    </div>
    {% endfor %}

  </div>
</div>










{%load cloudinary%}

<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <fieldset class="form-group">
        <legend class="border-bottom mb-4">Upload Pic</legend>

        {{ form|crispy }}

    </fieldset>
    <div class="from-group">
        <button class="btn btn-outline-info" type="submit">Upload</button>
    </div>
</form>



{% endblock %}


